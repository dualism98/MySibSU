{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/khramushin/Desktop/MySibSU/screens/TimetableScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport { h, w } from \"../modules/constants\";\nimport Choose from \"../modules/timetableFolder/Choose\";\nimport MainHeader from \"../modules/MainHeader\";\nimport TimetableHeader from \"../modules/TimetableHeader\";\nimport Day from \"../modules/timetableFolder/Day\";\nimport Swiper from 'react-native-swiper';\nimport Help from \"../modules/timetableFolder/Help\";\nvar groupURL = 'https://timetable.mysibsau.ru/groups/';\nvar secondGroupURL = 'http://185.228.233.243/groups/';\nvar weekURL = 'http://185.228.233.243/CurrentWeek/';\nvar secondWeekURL = 'http://185.228.233.243/CurrentWeek/';\n\nvar storeData = function storeData(value, name) {\n  return _regeneratorRuntime.async(function storeData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('@key', String(value)));\n\n        case 3:\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('@name', String(name)));\n\n        case 5:\n          _context.next = 9;\n          break;\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n};\n\nvar TimetableScreen = function (_PureComponent) {\n  _inherits(TimetableScreen, _PureComponent);\n\n  var _super = _createSuper(TimetableScreen);\n\n  function TimetableScreen(props) {\n    var _this;\n\n    _classCallCheck(this, TimetableScreen);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      group: null,\n      weekDay: '',\n      week: 1,\n      currentWeek: 1,\n      textGroup: '',\n      groupList: [],\n      timetable: [{\n        even_week: [],\n        odd_week: []\n      }],\n      loading: true,\n      changeButtonFirst: {\n        width: w,\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: 'lightgray'\n      },\n      changeButtonSecond: {\n        width: w,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      similar: [],\n      shown: [],\n      x: 0,\n      y: 0\n    };\n    return _this;\n  }\n\n  _createClass(TimetableScreen, [{\n    key: \"getInfo\",\n    value: function getInfo() {\n      var _this2 = this;\n\n      var currentWeek, id, name, weekApiCall, week;\n      return _regeneratorRuntime.async(function getInfo$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              currentWeek = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@key').then(function (id) {\n                return _this2.setState({\n                  group: id\n                });\n              }));\n\n            case 3:\n              id = _context2.sent;\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@name').then(function (name) {\n                return _this2.setState({\n                  textGroup: name\n                });\n              }));\n\n            case 6:\n              name = _context2.sent;\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(fetch(weekURL, {\n                method: 'GET'\n              }));\n\n            case 9:\n              weekApiCall = _context2.sent;\n              _context2.next = 12;\n              return _regeneratorRuntime.awrap(weekApiCall.json());\n\n            case 12:\n              week = _context2.sent;\n              _context2.next = 15;\n              return _regeneratorRuntime.awrap(this.setState({\n                week: week.week,\n                currentWeek: week.week\n              }));\n\n            case 15:\n              this.getTimetable(this.state.group);\n              return _context2.abrupt(\"return\", currentWeek);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var groupsApiCall, groups, array, date, days, _groupsApiCall, _groups, _date, _days;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              this.getInfo();\n              _context3.next = 4;\n              return _regeneratorRuntime.awrap(fetch(groupURL, {\n                method: 'GET'\n              }));\n\n            case 4:\n              groupsApiCall = _context3.sent;\n              _context3.next = 7;\n              return _regeneratorRuntime.awrap(groupsApiCall.json());\n\n            case 7:\n              groups = _context3.sent;\n              _context3.next = 10;\n              return _regeneratorRuntime.awrap(this.setState({\n                groupList: groups\n              }));\n\n            case 10:\n              array = [];\n              groups.map(function (item) {\n                array.push(item.name);\n              });\n              this.setState({\n                similar: array\n              });\n              date = new Date();\n              days = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];\n              this.setState({\n                weekDay: days[date.getDay()]\n              });\n              _context3.next = 34;\n              break;\n\n            case 18:\n              _context3.prev = 18;\n              _context3.t0 = _context3[\"catch\"](0);\n              _context3.next = 22;\n              return _regeneratorRuntime.awrap(fetch(secondGroupURL, {\n                method: 'GET'\n              }));\n\n            case 22:\n              _groupsApiCall = _context3.sent;\n              _context3.next = 25;\n              return _regeneratorRuntime.awrap(_groupsApiCall.json());\n\n            case 25:\n              _groups = _context3.sent;\n              _context3.next = 28;\n              return _regeneratorRuntime.awrap(this.setState({\n                groupList: _groups\n              }));\n\n            case 28:\n              array = [];\n\n              _groups.map(function (item) {\n                array.push(item.name);\n              });\n\n              this.setState({\n                similar: array\n              });\n              _date = new Date();\n              _days = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];\n              this.setState({\n                weekDay: _days[_date.getDay()]\n              });\n\n            case 34:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, [[0, 18]], Promise);\n    }\n  }, {\n    key: \"getTimetable\",\n    value: function getTimetable(id) {\n      var firstURL, secondURL, timetableApiCall, timetable, _timetableApiCall, _timetable;\n\n      return _regeneratorRuntime.async(function getTimetable$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              firstURL = 'https://timetable.mysibsau.ru/timetable/' + String(id);\n              secondURL = 'http://185.228.233.243/timetable/' + String(id);\n              _context4.prev = 2;\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(fetch(firstURL, {\n                method: 'GET'\n              }));\n\n            case 5:\n              timetableApiCall = _context4.sent;\n              _context4.next = 8;\n              return _regeneratorRuntime.awrap(timetableApiCall.json());\n\n            case 8:\n              timetable = _context4.sent;\n              this.setState({\n                timetable: timetable,\n                loading: false\n              });\n              _context4.next = 27;\n              break;\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](2);\n              _context4.prev = 14;\n              _context4.next = 17;\n              return _regeneratorRuntime.awrap(fetch(secondURL, {\n                method: 'GET'\n              }));\n\n            case 17:\n              _timetableApiCall = _context4.sent;\n              _context4.next = 20;\n              return _regeneratorRuntime.awrap(_timetableApiCall.json());\n\n            case 20:\n              _timetable = _context4.sent;\n              this.setState({\n                timetable: _timetable,\n                loading: false\n              });\n              _context4.next = 27;\n              break;\n\n            case 24:\n              _context4.prev = 24;\n              _context4.t1 = _context4[\"catch\"](14);\n              console.log('Не могу получить расписание');\n\n            case 27:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, [[2, 12], [14, 24]], Promise);\n    }\n  }, {\n    key: \"setGroup\",\n    value: function setGroup(name) {\n      var _this3 = this;\n\n      var choosed = name.toUpperCase().split(' ')[0];\n      this.state.groupList.map(function (group) {\n        if (group.name === choosed) {\n          _this3.setState({\n            textGroup: group.name\n          });\n\n          _this3.setState({\n            group: group.id\n          });\n\n          _this3.getTimetable(group.id);\n\n          storeData(group.id, group.name);\n        }\n      });\n    }\n  }, {\n    key: \"similarGroup\",\n    value: function similarGroup(text) {\n      if (text.length >= 2) {\n        this.setState({\n          shown: this.state.similar.filter(function (item) {\n            if (item.includes(text.toUpperCase())) return item;\n          })\n        });\n      }\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex() {\n      if ((new Date() - new Date(2020, 9, 12, 0, 0, 0, 0)) / 1000 / 60 / 60 / 24 % 14 <= 7) return 1;else return 2;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      if (this.state.group === null) {\n        return React.createElement(View, {\n          style: styles.container,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 17\n          }\n        }, React.createElement(MainHeader, {\n          title: 'Моё расписание',\n          onPress: function onPress() {\n            return _this4.props.navigation.goBack();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 17\n          }\n        }), React.createElement(View, {\n          style: {\n            flexDirection: 'row',\n            marginTop: 25\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }\n        }, React.createElement(TextInput, {\n          style: styles.input,\n          onChangeText: function onChangeText(text) {\n            return _this4.similarGroup(text);\n          },\n          placeholder: 'Введите название группы...',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 21\n          }\n        }), React.createElement(TouchableHighlight, {\n          style: {\n            borderTopRightRadius: 7,\n            borderBottomRightRadius: 7\n          },\n          onPress: function onPress() {\n            return _this4.setGroup(_this4.state.textGroup);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 21\n          }\n        }, React.createElement(View, {\n          style: styles.button,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }\n        }, \"\\uD83D\\uDD0D\")))), this.state.shown.map(function (item) {\n          return React.createElement(Help, {\n            info: item,\n            onPress: function onPress() {\n              return _this4.setGroup(item);\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 28\n            }\n          });\n        }), React.createElement(Choose, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 17\n          }\n        }));\n      } else {\n        var y;\n        return React.createElement(View, {\n          style: styles.container,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 17\n          }\n        }, React.createElement(View, {\n          style: {\n            height: StatusBar.currentHeight,\n            width: w,\n            backgroundColor: 'white',\n            position: 'absolute',\n            zIndex: 2\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }\n        }), React.createElement(TimetableHeader, {\n          title: this.state.textGroup,\n          onPress: function onPress() {\n            AsyncStorage.removeItem('@key');\n            AsyncStorage.removeItem('@group');\n\n            _this4.setState({\n              group: null,\n              textGroup: '',\n              shown: [],\n              timetable: [{\n                even_week: [],\n                odd_week: []\n              }]\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 21\n          }\n        }), React.createElement(Swiper, {\n          style: styles.wrapper,\n          loop: false,\n          index: this.getIndex() - 1,\n          showsPagination: false,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 21\n          }\n        }, React.createElement(ScrollView, {\n          ref: \"_ScrollView1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }\n        }, React.createElement(View, {\n          style: styles.changeView,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }\n        }, React.createElement(TouchableWithoutFeedback, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 29\n          }\n        }, React.createElement(View, {\n          style: this.state.changeButtonSecond,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 33\n          }\n        }, React.createElement(Text, {\n          style: styles.changeText,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 37\n          }\n        }, \"1 \\u043D\\u0435\\u0434\\u0435\\u043B\\u044F\")))), this.state.loading === true ? React.createElement(Text, {\n          style: styles.loading,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 56\n          }\n        }, \"\\u041F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435, \\u0438\\u0434\\u0451\\u0442 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\") : this.state.timetable[0].odd_week.map(function (item) {\n          return React.createElement(View, {\n            onLayout: function onLayout(event) {\n              var date = new Date();\n\n              if (date.getDay() - 1 === item.day && _this4.getIndex() === 1) {\n                var layout = event.nativeEvent.layout;\n                y = layout.y;\n\n                _this4.refs._ScrollView1.scrollTo({\n                  x: 0,\n                  y: y - 20,\n                  animated: true\n                });\n              }\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 33\n            }\n          }, React.createElement(Day, {\n            day: item,\n            key: item.day,\n            week: 1,\n            currentWeek: _this4.getIndex(),\n            weekDay: _this4.state.weekDay,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 33\n            }\n          }));\n        })), React.createElement(ScrollView, {\n          ref: \"_ScrollView2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }\n        }, React.createElement(View, {\n          style: styles.changeView,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }\n        }, React.createElement(TouchableWithoutFeedback, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 29\n          }\n        }, React.createElement(View, {\n          style: this.state.changeButtonSecond,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 33\n          }\n        }, React.createElement(Text, {\n          style: styles.changeText,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 37\n          }\n        }, \"2 \\u043D\\u0435\\u0434\\u0435\\u043B\\u044F\")))), this.state.loading === true ? React.createElement(Text, {\n          style: styles.loading,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 56\n          }\n        }, \"\\u041F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435, \\u0438\\u0434\\u0451\\u0442 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\") : this.state.timetable[0].even_week.map(function (item) {\n          return React.createElement(View, {\n            onLayout: function onLayout(event) {\n              var date = new Date();\n\n              if (date.getDay() - 1 === item.day && _this4.getIndex() === 2) {\n                var layout = event.nativeEvent.layout;\n                y = layout.y;\n\n                _this4.refs._ScrollView2.scrollTo({\n                  x: 0,\n                  y: y - 20,\n                  animated: true\n                });\n              }\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 36\n            }\n          }, React.createElement(Day, {\n            day: item,\n            key: item.day,\n            week: 2,\n            currentWeek: _this4.getIndex(),\n            weekDay: _this4.state.weekDay,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 29\n            }\n          }));\n        }))));\n      }\n    }\n  }]);\n\n  return TimetableScreen;\n}(PureComponent);\n\nexport { TimetableScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'white',\n    flex: 1,\n    alignItems: 'center',\n    paddingBottom: 0\n  },\n  input: {\n    width: w * 0.75,\n    height: h * 0.06,\n    borderWidth: 2,\n    borderColor: '#006AB3',\n    borderTopLeftRadius: 7,\n    borderBottomLeftRadius: 7,\n    backgroundColor: 'white',\n    paddingLeft: 10,\n    fontSize: 20,\n    fontFamily: 'roboto'\n  },\n  button: {\n    height: h * 0.06,\n    width: w * 0.15,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderColor: '#006AB3',\n    borderWidth: 2,\n    borderLeftWidth: 0,\n    borderTopRightRadius: 7,\n    borderBottomRightRadius: 7,\n    backgroundColor: 'white'\n  },\n  changeView: {\n    height: w * 0.1,\n    flexDirection: 'row',\n    alignSelf: 'center',\n    borderTopWidth: 2,\n    borderBottomWidth: 2,\n    borderColor: '#006AB3',\n    marginBottom: 20\n  },\n  changeButton: {\n    width: w,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  changeButtonChoosen: {\n    width: w * 0.5,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'lightgray'\n  },\n  changeText: {\n    fontSize: 20,\n    fontFamily: 'roboto',\n    color: '#006AB3'\n  },\n  changeGroupView: {\n    height: w * 0.1,\n    width: w,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 20,\n    borderBottomWidth: 2,\n    borderColor: '#006AB3'\n  },\n  changeGroupText: {\n    color: '#006AB3',\n    fontFamily: 'roboto',\n    fontSize: 20\n  },\n  loading: {\n    marginTop: 20,\n    fontSize: 20,\n    fontFamily: 'roboto',\n    color: '#006AB3',\n    alignSelf: 'center'\n  }\n});","map":{"version":3,"sources":["/Users/khramushin/Desktop/MySibSU/screens/TimetableScreen.js"],"names":["React","PureComponent","AsyncStorage","h","w","Choose","MainHeader","TimetableHeader","Day","Swiper","Help","groupURL","secondGroupURL","weekURL","secondWeekURL","storeData","value","name","setItem","String","TimetableScreen","props","state","group","weekDay","week","currentWeek","textGroup","groupList","timetable","even_week","odd_week","loading","changeButtonFirst","width","alignItems","justifyContent","backgroundColor","changeButtonSecond","similar","shown","x","y","getItem","then","id","setState","fetch","method","weekApiCall","json","getTimetable","getInfo","groupsApiCall","groups","array","map","item","push","date","Date","days","getDay","firstURL","secondURL","timetableApiCall","console","log","choosed","toUpperCase","split","text","length","filter","includes","styles","container","navigation","goBack","flexDirection","marginTop","input","similarGroup","borderTopRightRadius","borderBottomRightRadius","setGroup","button","height","StatusBar","currentHeight","position","zIndex","removeItem","wrapper","getIndex","changeView","changeText","event","day","layout","nativeEvent","refs","_ScrollView1","scrollTo","animated","_ScrollView2","StyleSheet","create","flex","paddingBottom","borderWidth","borderColor","borderTopLeftRadius","borderBottomLeftRadius","paddingLeft","fontSize","fontFamily","borderLeftWidth","alignSelf","borderTopWidth","borderBottomWidth","marginBottom","changeButton","changeButtonChoosen","color","changeGroupView","changeGroupText"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport { View, Text, StyleSheet, TouchableWithoutFeedback, TextInput, ScrollView, StatusBar, TouchableHighlight } from 'react-native'\nimport AsyncStorage from '@react-native-community/async-storage'\nimport { h, w } from '../modules/constants'\nimport Choose from '../modules/timetableFolder/Choose'\nimport MainHeader from '../modules/MainHeader'\nimport TimetableHeader from '../modules/TimetableHeader'\nimport Day from '../modules/timetableFolder/Day'\nimport Swiper from 'react-native-swiper'\nimport Help from '../modules/timetableFolder/Help'\n\n\nconst groupURL = 'https://timetable.mysibsau.ru/groups/'\nconst secondGroupURL = 'http://185.228.233.243/groups/'\nconst weekURL = 'http://185.228.233.243/CurrentWeek/'\nconst secondWeekURL = 'http://185.228.233.243/CurrentWeek/'\n\nconst storeData = async (value, name) => {\n    try {\n      await AsyncStorage.setItem('@key', String(value))\n      await AsyncStorage.setItem('@name', String(name))\n    } catch (e) {\n    }\n}\n\n\nexport default class TimetableScreen extends PureComponent {\n    constructor(props){\n        super(props)\n    }\n\n    state = {\n        group: null,\n        weekDay: '',\n        week: 1,\n        currentWeek: 1,\n        textGroup: '',\n        groupList: [],\n        timetable: [{even_week: [], odd_week: []}],\n        loading: true,\n        changeButtonFirst: {\n            width: w,\n            alignItems: 'center',\n            justifyContent: 'center',\n            backgroundColor: 'lightgray',\n        },\n        changeButtonSecond: {\n            width: w,\n            alignItems: 'center',\n            justifyContent: 'center',\n        },\n        similar: [],\n        shown: [],\n        x: 0,\n        y: 0,\n    }\n\n    async getInfo(){\n        var currentWeek = 0;\n        const id = await AsyncStorage.getItem('@key').then((id) => this.setState({ group: id}))\n        const name = await AsyncStorage.getItem('@name').then((name) => this.setState({ textGroup: name}))\n        const weekApiCall = await fetch(weekURL, {method: 'GET'})\n            const week = await weekApiCall.json()\n            await this.setState({ week: week.week, currentWeek: week.week })\n\n        this.getTimetable(this.state.group)\n        return currentWeek\n    }\n\n    async componentDidMount(){\n        try {\n            this.getInfo()\n            const groupsApiCall = await fetch(groupURL, {method: 'GET'})\n            const groups = await groupsApiCall.json()\n            await this.setState({ groupList: groups })\n            \n            var array = []\n            groups.map(item => {\n                array.push(item.name)\n            })\n\n            this.setState({similar: array})\n\n            let date = new Date()\n            let days = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];\n\n            this.setState({ weekDay:days[date.getDay()] })\n        } catch(err) {\n            const groupsApiCall = await fetch(secondGroupURL, {method: 'GET'})\n            const groups = await groupsApiCall.json()\n            await this.setState({ groupList: groups })\n            \n            var array = []\n            groups.map(item => {\n                array.push(item.name)\n            })\n\n            this.setState({similar: array})\n\n            let date = new Date()\n            let days = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];\n\n            this.setState({ weekDay:days[date.getDay()] })\n        }\n    }\n\n    async getTimetable(id){\n        var firstURL = 'https://timetable.mysibsau.ru/timetable/' + String(id)\n        var secondURL = 'http://185.228.233.243/timetable/' + String(id)\n\n        try {\n\n            const timetableApiCall = await fetch(firstURL, {method: 'GET'})\n            const timetable = await timetableApiCall.json()\n\n            this.setState({ timetable: timetable, loading: false })\n        } catch(err) {\n            try{\n                const timetableApiCall = await fetch(secondURL, {method: 'GET'})\n                const timetable = await timetableApiCall.json()\n\n                this.setState({ timetable: timetable, loading: false })\n            }\n            catch(err){\n                console.log('Не могу получить расписание')\n            }\n        }\n    }\n\n    setGroup(name){\n        var choosed = name\n        .toUpperCase()\n        .split(' ')[0]\n\n        this.state.groupList.map(group => {\n\n            if (group.name === choosed){\n                this.setState({ textGroup: group.name})\n                this.setState({ group: group.id})\n                this.getTimetable(group.id)\n                storeData(group.id, group.name)\n            }\n        })\n    }\n\n    similarGroup(text){\n        if(text.length >= 2){\n            this.setState({ shown: this.state.similar.filter(item => {\n                if(item.includes(text.toUpperCase()))\n                    return item\n        })})\n        }\n    }\n\n    getIndex(){\n        if (((new Date() - new Date(2020, 9, 12, 0, 0, 0, 0))/1000/60/60/24)%14 <= 7)\n            return 1\n        else\n            return 2\n    }\n\n    render(){\n        if (this.state.group === null){\n            return(\n                <View style={styles.container}>\n                <MainHeader title={'Моё расписание'} onPress={() => this.props.navigation.goBack()}/>\n                <View style={{flexDirection: 'row', marginTop: 25}}>\n                    <TextInput style={styles.input} onChangeText={text => this.similarGroup(text)} placeholder={'Введите название группы...'} />\n                    <TouchableHighlight style={{borderTopRightRadius: 7, borderBottomRightRadius: 7}} onPress={() => this.setGroup(this.state.textGroup)}>\n                        <View style={styles.button}>\n                            <Text>🔍</Text>\n                        </View>\n                    </TouchableHighlight>\n                </View>\n                {this.state.shown.map(item => {\n                    return(<Help info={item} onPress={() => this.setGroup(item)} />)\n                })}\n                <Choose />\n                </View>\n            )\n        }\n        else {\n            var y\n            return(\n                \n                <View style={styles.container}>\n                    <View style={{ height: StatusBar.currentHeight, width: w, backgroundColor: 'white', position: 'absolute', zIndex: 2}}></View>\n                    <TimetableHeader title={this.state.textGroup} onPress={() => {\n                        AsyncStorage.removeItem('@key')\n                        AsyncStorage.removeItem('@group')\n                        this.setState({ group: null, textGroup: '', shown: [], timetable: [{even_week: [], odd_week: []}]})\n                        }}/>\n\n                    <Swiper style={styles.wrapper} loop={false} index={this.getIndex() - 1} showsPagination={false}>\n                        <ScrollView ref={\"_ScrollView1\"}>\n    \n                        <View style={styles.changeView}>\n                            <TouchableWithoutFeedback>\n                                <View style={this.state.changeButtonSecond}>\n                                    <Text style={styles.changeText}>1 неделя</Text>\n                                </View>\n                            </TouchableWithoutFeedback>\n                        </View>\n                        {this.state.loading === true ? <Text style={styles.loading}>Подождите, идёт загрузка...</Text> :\n                        this.state.timetable[0].odd_week.map(item => {\n                            return(\n                                <View onLayout={(event) => {\n                                    var date = new Date()\n                                    if(date.getDay() - 1 === item.day && this.getIndex() === 1){\n                                        const layout = event.nativeEvent.layout\n                                        y = layout.y\n                                        this.refs._ScrollView1.scrollTo({x: 0, y: y - 20, animated: true})\n                                    }\n                                }}>\n                                <Day day={item} key={item.day} week={1} currentWeek={this.getIndex()} weekDay={this.state.weekDay} />\n                                </View>\n                        )})}\n                        </ScrollView>\n                        <ScrollView ref={\"_ScrollView2\"}>\n                        <View style={styles.changeView}>\n                            <TouchableWithoutFeedback>\n                                <View style={this.state.changeButtonSecond}>\n                                    <Text style={styles.changeText}>2 неделя</Text>\n                                </View>\n                            </TouchableWithoutFeedback>\n                        </View>\n                        {this.state.loading === true ? <Text style={styles.loading}>Подождите, идёт загрузка...</Text> :\n                        this.state.timetable[0].even_week.map(item => {\n                            return(<View onLayout={(event) => {\n                                var date = new Date()\n                                if(date.getDay() - 1 === item.day && this.getIndex() === 2){\n                                    const layout = event.nativeEvent.layout\n                                    y = layout.y\n                                    this.refs._ScrollView2.scrollTo({x: 0, y: y - 20, animated: true})\n                                }\n                            }}>\n                            <Day day={item} key={item.day} week={2} currentWeek={this.getIndex()} weekDay={this.state.weekDay}/>\n                            </View>) })}\n                    \n                        </ScrollView>\n                    </Swiper>\n                       \n                </View>\n                \n            )\n        }    \n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: 'white',\n        flex: 1,\n        alignItems: 'center',\n        paddingBottom: 0\n    },\n\n    input: {\n        width: w * 0.75,\n        height: h * 0.06,\n        borderWidth: 2,\n        borderColor: '#006AB3',\n        borderTopLeftRadius: 7,\n        borderBottomLeftRadius: 7,\n        backgroundColor: 'white',\n        paddingLeft: 10,\n        fontSize: 20,\n        fontFamily: 'roboto'\n    },\n\n    button: {\n        height: h * 0.06,\n        width: w * 0.15,\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderColor: '#006AB3',\n        borderWidth: 2,\n        borderLeftWidth: 0,\n        borderTopRightRadius: 7,\n        borderBottomRightRadius: 7,\n        backgroundColor: 'white',\n    },\n\n    changeView: {\n        height: w * 0.1,\n        flexDirection: 'row',\n        alignSelf: 'center',\n        borderTopWidth: 2,\n        borderBottomWidth: 2,\n        borderColor: '#006AB3',\n        marginBottom: 20\n    },\n\n    changeButton: {\n        width: w,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n\n    changeButtonChoosen: {\n        width: w * 0.5,\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: 'lightgray',\n    },\n\n    changeText: {\n        fontSize: 20,\n        fontFamily: 'roboto',\n        color: '#006AB3',\n    },\n\n    changeGroupView: {\n        height: w * 0.1,\n        width: w,\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginBottom: 20,\n        borderBottomWidth: 2,\n        borderColor: '#006AB3',\n    },\n\n    changeGroupText: {\n        color: '#006AB3',\n        fontFamily: 'roboto',\n        fontSize: 20\n    },\n\n    loading: {\n        marginTop: 20,\n        fontSize: 20,\n        fontFamily: 'roboto',\n        color: '#006AB3',\n        alignSelf: 'center'\n    }\n\n})\n\n"]},"metadata":{},"sourceType":"module"}