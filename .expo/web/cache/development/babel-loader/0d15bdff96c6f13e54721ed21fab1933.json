{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/khramushin/Desktop/MySibSU/screens/TimetableScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport { h, w } from \"../modules/constants\";\nimport Choose from \"../modules/timetableFolder/Choose\";\nimport MainHeader from \"../modules/MainHeader\";\nimport TimetableHeader from \"../modules/TimetableHeader\";\nimport Day from \"../modules/timetableFolder/Day\";\nimport Swiper from 'react-native-swiper';\nimport Help from \"../modules/timetableFolder/Help\";\nimport { LinearGradient } from 'expo-linear-gradient';\nvar groupURL = 'https://timetable.mysibsau.ru/groups/';\nvar secondGroupURL = 'http://185.228.233.243/groups/';\nvar weekURL = 'http://185.228.233.243/CurrentWeek/';\n\nvar storeData = function storeData(value, name) {\n  return _regeneratorRuntime.async(function storeData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('@key', String(value)));\n\n        case 3:\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('@name', String(name)));\n\n        case 5:\n          _context.next = 9;\n          break;\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n};\n\nvar TimetableScreen = function (_PureComponent) {\n  _inherits(TimetableScreen, _PureComponent);\n\n  var _super = _createSuper(TimetableScreen);\n\n  function TimetableScreen(props) {\n    var _this;\n\n    _classCallCheck(this, TimetableScreen);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      group: null,\n      weekDay: '',\n      week: 1,\n      currentWeek: 1,\n      textGroup: '',\n      groupList: [],\n      timetable: [{\n        even_week: [],\n        odd_week: []\n      }],\n      loading: true,\n      similar: [],\n      shown: [],\n      x: 0,\n      y: 0,\n      index: 1\n    };\n    return _this;\n  }\n\n  _createClass(TimetableScreen, [{\n    key: \"getInfo\",\n    value: function getInfo() {\n      var _this2 = this;\n\n      var currentWeek, id, name, weekApiCall, week;\n      return _regeneratorRuntime.async(function getInfo$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              currentWeek = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@key').then(function (id) {\n                return _this2.setState({\n                  group: id\n                });\n              }));\n\n            case 3:\n              id = _context2.sent;\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@name').then(function (name) {\n                return _this2.setState({\n                  textGroup: name\n                });\n              }));\n\n            case 6:\n              name = _context2.sent;\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(fetch(weekURL, {\n                method: 'GET'\n              }));\n\n            case 9:\n              weekApiCall = _context2.sent;\n              _context2.next = 12;\n              return _regeneratorRuntime.awrap(weekApiCall.json());\n\n            case 12:\n              week = _context2.sent;\n              _context2.next = 15;\n              return _regeneratorRuntime.awrap(this.setState({\n                week: week.week,\n                currentWeek: week.week,\n                index: week.week - 1\n              }));\n\n            case 15:\n              this.getTimetable(this.state.group);\n              return _context2.abrupt(\"return\", currentWeek);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var groupsApiCall, groups, array, date, days, _groupsApiCall, _groups, _date, _days;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              this.getInfo();\n              _context3.next = 4;\n              return _regeneratorRuntime.awrap(fetch(groupURL, {\n                method: 'GET'\n              }));\n\n            case 4:\n              groupsApiCall = _context3.sent;\n              _context3.next = 7;\n              return _regeneratorRuntime.awrap(groupsApiCall.json());\n\n            case 7:\n              groups = _context3.sent;\n              _context3.next = 10;\n              return _regeneratorRuntime.awrap(this.setState({\n                groupList: groups\n              }));\n\n            case 10:\n              array = [];\n              groups.map(function (item) {\n                array.push(item.name);\n              });\n              this.setState({\n                similar: array\n              });\n              date = new Date();\n              days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];\n              this.setState({\n                weekDay: days[date.getDay()]\n              });\n              _context3.next = 34;\n              break;\n\n            case 18:\n              _context3.prev = 18;\n              _context3.t0 = _context3[\"catch\"](0);\n              _context3.next = 22;\n              return _regeneratorRuntime.awrap(fetch(secondGroupURL, {\n                method: 'GET'\n              }));\n\n            case 22:\n              _groupsApiCall = _context3.sent;\n              _context3.next = 25;\n              return _regeneratorRuntime.awrap(_groupsApiCall.json());\n\n            case 25:\n              _groups = _context3.sent;\n              _context3.next = 28;\n              return _regeneratorRuntime.awrap(this.setState({\n                groupList: _groups\n              }));\n\n            case 28:\n              array = [];\n\n              _groups.map(function (item) {\n                array.push(item.name);\n              });\n\n              this.setState({\n                similar: array\n              });\n              _date = new Date();\n              _days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];\n              this.setState({\n                weekDay: _days[_date.getDay()]\n              });\n\n            case 34:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, [[0, 18]], Promise);\n    }\n  }, {\n    key: \"getTimetable\",\n    value: function getTimetable(id) {\n      var firstURL, secondURL, timetableApiCall, timetable, _timetableApiCall, _timetable;\n\n      return _regeneratorRuntime.async(function getTimetable$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              firstURL = 'https://timetable.mysibsau.ru/timetable/' + String(id);\n              secondURL = 'http://185.228.233.243/timetable/' + String(id);\n              _context4.prev = 2;\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(fetch(firstURL, {\n                method: 'GET'\n              }));\n\n            case 5:\n              timetableApiCall = _context4.sent;\n              _context4.next = 8;\n              return _regeneratorRuntime.awrap(timetableApiCall.json());\n\n            case 8:\n              timetable = _context4.sent;\n              this.setState({\n                timetable: timetable,\n                loading: false\n              });\n              _context4.next = 27;\n              break;\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](2);\n              _context4.prev = 14;\n              _context4.next = 17;\n              return _regeneratorRuntime.awrap(fetch(secondURL, {\n                method: 'GET'\n              }));\n\n            case 17:\n              _timetableApiCall = _context4.sent;\n              _context4.next = 20;\n              return _regeneratorRuntime.awrap(_timetableApiCall.json());\n\n            case 20:\n              _timetable = _context4.sent;\n              this.setState({\n                timetable: _timetable,\n                loading: false\n              });\n              _context4.next = 27;\n              break;\n\n            case 24:\n              _context4.prev = 24;\n              _context4.t1 = _context4[\"catch\"](14);\n              console.log('–ù–µ –º–æ–≥—É –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ');\n\n            case 27:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, [[2, 12], [14, 24]], Promise);\n    }\n  }, {\n    key: \"setGroup\",\n    value: function setGroup(name) {\n      var _this3 = this;\n\n      var choosed = name.toUpperCase().split(' ')[0];\n      this.state.groupList.map(function (group) {\n        if (group.name === choosed) {\n          _this3.setState({\n            textGroup: group.name\n          });\n\n          _this3.setState({\n            group: group.id\n          });\n\n          _this3.getTimetable(group.id);\n\n          storeData(group.id, group.name);\n        }\n      });\n    }\n  }, {\n    key: \"similarGroup\",\n    value: function similarGroup(text) {\n      if (text.length >= 2) {\n        this.setState({\n          shown: this.state.similar.filter(function (item) {\n            if (item.includes(text.toUpperCase())) return item;\n          })\n        });\n      }\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex() {\n      if ((new Date() - new Date(2020, 9, 12, 0, 0, 0, 0)) / 1000 / 60 / 60 / 24 % 14 <= 7) return 1;else return 2;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      if (this.state.group === null) {\n        return React.createElement(View, {\n          style: styles.container,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }\n        }, React.createElement(MainHeader, {\n          title: '–ú–æ—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ',\n          onPress: function onPress() {\n            return _this4.props.navigation.goBack();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 17\n          }\n        }), React.createElement(View, {\n          style: {\n            flexDirection: 'row',\n            marginTop: 25\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 17\n          }\n        }, React.createElement(TextInput, {\n          style: styles.input,\n          onChangeText: function onChangeText(text) {\n            return _this4.similarGroup(text);\n          },\n          placeholder: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã...',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 21\n          }\n        }), React.createElement(TouchableHighlight, {\n          style: {\n            borderTopRightRadius: 7,\n            borderBottomRightRadius: 7\n          },\n          onPress: function onPress() {\n            return _this4.setGroup(_this4.state.textGroup);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }\n        }, React.createElement(View, {\n          style: styles.button,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 29\n          }\n        }, \"\\uD83D\\uDD0D\")))), this.state.shown.map(function (item) {\n          return React.createElement(Help, {\n            info: item,\n            onPress: function onPress() {\n              return _this4.setGroup(item);\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 28\n            }\n          });\n        }), React.createElement(Choose, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }\n        }));\n      } else {\n        var y;\n        return React.createElement(View, {\n          style: styles.container,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 17\n          }\n        }, React.createElement(View, {\n          style: {\n            height: StatusBar.currentHeight,\n            width: w,\n            backgroundColor: 'white',\n            position: 'absolute',\n            zIndex: 2\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 21\n          }\n        }), React.createElement(TimetableHeader, {\n          title: this.state.textGroup,\n          week: this.state.index,\n          onPress: function onPress() {\n            AsyncStorage.removeItem('@key');\n            AsyncStorage.removeItem('@group');\n\n            _this4.setState({\n              group: null,\n              textGroup: '',\n              shown: [],\n              timetable: [{\n                even_week: [],\n                odd_week: []\n              }]\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }\n        }), React.createElement(Swiper, {\n          style: styles.wrapper,\n          loop: false,\n          index: this.getIndex() - 1,\n          showsPagination: false,\n          onIndexChanged: function onIndexChanged(index) {\n            return _this4.setState({\n              index: index\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 21\n          }\n        }, React.createElement(ScrollView, {\n          ref: \"_ScrollView1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }\n        }, this.state.loading === true ? React.createElement(Text, {\n          style: styles.loading,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 56\n          }\n        }, \"\\u041F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435, \\u0438\\u0434\\u0451\\u0442 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\") : this.state.timetable[0].odd_week.map(function (item) {\n          return React.createElement(View, {\n            onLayout: function onLayout(event) {\n              var date = new Date();\n\n              if (date.getDay() - 1 === item.day && _this4.getIndex() === 1) {\n                var layout = event.nativeEvent.layout;\n                y = layout.y;\n\n                _this4.refs._ScrollView1.scrollTo({\n                  x: 0,\n                  y: y - 20,\n                  animated: true\n                });\n              }\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 33\n            }\n          }, React.createElement(Day, {\n            day: item,\n            key: item.day,\n            week: 1,\n            currentWeek: _this4.getIndex(),\n            weekDay: _this4.state.weekDay,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 33\n            }\n          }));\n        })), React.createElement(ScrollView, {\n          ref: \"_ScrollView2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }\n        }, this.state.loading === true ? React.createElement(Text, {\n          style: styles.loading,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 56\n          }\n        }, \"\\u041F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435, \\u0438\\u0434\\u0451\\u0442 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\") : this.state.timetable[0].even_week.map(function (item) {\n          return React.createElement(View, {\n            onLayout: function onLayout(event) {\n              var date = new Date();\n\n              if (date.getDay() - 1 === item.day && _this4.getIndex() === 2) {\n                var layout = event.nativeEvent.layout;\n                y = layout.y;\n\n                _this4.refs._ScrollView2.scrollTo({\n                  x: 0,\n                  y: y - 20,\n                  animated: true\n                });\n              }\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 36\n            }\n          }, React.createElement(Day, {\n            day: item,\n            key: item.day,\n            week: 2,\n            currentWeek: _this4.getIndex(),\n            weekDay: _this4.state.weekDay,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 29\n            }\n          }));\n        }))));\n      }\n    }\n  }]);\n\n  return TimetableScreen;\n}(PureComponent);\n\nexport { TimetableScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'white',\n    flex: 1,\n    alignItems: 'center',\n    paddingBottom: 0\n  },\n  input: {\n    width: w * 0.75,\n    height: h * 0.06,\n    borderTopLeftRadius: 7,\n    borderBottomLeftRadius: 7,\n    backgroundColor: 'white',\n    paddingLeft: 10,\n    fontSize: 20,\n    fontFamily: 'roboto',\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 6,\n      height: 6\n    },\n    shadowOpacity: 0.30,\n    shadowRadius: 4.65,\n    elevation: 4\n  },\n  button: {\n    height: h * 0.06,\n    width: w * 0.15,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderLeftWidth: 0,\n    borderTopRightRadius: 7,\n    borderBottomRightRadius: 7,\n    backgroundColor: 'white',\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 6,\n      height: 6\n    },\n    shadowOpacity: 0.30,\n    shadowRadius: 4.65,\n    elevation: 4\n  },\n  changeText: {\n    fontSize: 20,\n    fontFamily: 'roboto',\n    color: '#006AB3'\n  },\n  loading: {\n    marginTop: 20,\n    fontSize: 20,\n    fontFamily: 'roboto',\n    color: '#006AB3',\n    alignSelf: 'center'\n  }\n});","map":{"version":3,"sources":["/Users/khramushin/Desktop/MySibSU/screens/TimetableScreen.js"],"names":["React","PureComponent","AsyncStorage","h","w","Choose","MainHeader","TimetableHeader","Day","Swiper","Help","LinearGradient","groupURL","secondGroupURL","weekURL","storeData","value","name","setItem","String","TimetableScreen","props","state","group","weekDay","week","currentWeek","textGroup","groupList","timetable","even_week","odd_week","loading","similar","shown","x","y","index","getItem","then","id","setState","fetch","method","weekApiCall","json","getTimetable","getInfo","groupsApiCall","groups","array","map","item","push","date","Date","days","getDay","firstURL","secondURL","timetableApiCall","console","log","choosed","toUpperCase","split","text","length","filter","includes","styles","container","navigation","goBack","flexDirection","marginTop","input","similarGroup","borderTopRightRadius","borderBottomRightRadius","setGroup","button","height","StatusBar","currentHeight","width","backgroundColor","position","zIndex","removeItem","wrapper","getIndex","event","day","layout","nativeEvent","refs","_ScrollView1","scrollTo","animated","_ScrollView2","StyleSheet","create","flex","alignItems","paddingBottom","borderTopLeftRadius","borderBottomLeftRadius","paddingLeft","fontSize","fontFamily","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","justifyContent","borderLeftWidth","changeText","color","alignSelf"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport { View, Text, StyleSheet, TouchableWithoutFeedback, TextInput, ScrollView, StatusBar, TouchableHighlight } from 'react-native'\nimport AsyncStorage from '@react-native-community/async-storage'\nimport { h, w } from '../modules/constants'\nimport Choose from '../modules/timetableFolder/Choose'\nimport MainHeader from '../modules/MainHeader'\nimport TimetableHeader from '../modules/TimetableHeader'\nimport Day from '../modules/timetableFolder/Day'\nimport Swiper from 'react-native-swiper'\nimport Help from '../modules/timetableFolder/Help'\nimport { LinearGradient } from 'expo-linear-gradient'\n\nconst groupURL = 'https://timetable.mysibsau.ru/groups/'\nconst secondGroupURL = 'http://185.228.233.243/groups/'\nconst weekURL = 'http://185.228.233.243/CurrentWeek/'\n\nconst storeData = async (value, name) => {\n    try {\n      await AsyncStorage.setItem('@key', String(value))\n      await AsyncStorage.setItem('@name', String(name))\n    } catch (e) {\n    }\n}\n\n\nexport default class TimetableScreen extends PureComponent {\n    constructor(props){\n        super(props)\n    }\n\n    state = {\n        group: null,\n        weekDay: '',\n        week: 1,\n        currentWeek: 1,\n        textGroup: '',\n        groupList: [],\n        timetable: [{even_week: [], odd_week: []}],\n        loading: true,\n        similar: [],\n        shown: [],\n        x: 0,\n        y: 0,\n        index: 1\n    }\n\n    async getInfo(){\n        var currentWeek = 0;\n        const id = await AsyncStorage.getItem('@key').then((id) => this.setState({ group: id}))\n        const name = await AsyncStorage.getItem('@name').then((name) => this.setState({ textGroup: name}))\n        const weekApiCall = await fetch(weekURL, {method: 'GET'})\n            const week = await weekApiCall.json()\n            await this.setState({ week: week.week, currentWeek: week.week, index: week.week - 1})\n\n        this.getTimetable(this.state.group)\n        return currentWeek\n    }\n\n    async componentDidMount(){\n        try {\n            this.getInfo()\n            const groupsApiCall = await fetch(groupURL, {method: 'GET'})\n            const groups = await groupsApiCall.json()\n            await this.setState({ groupList: groups })\n            \n            var array = []\n            groups.map(item => {\n                array.push(item.name)\n            })\n\n            this.setState({similar: array})\n\n            let date = new Date()\n            let days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];\n\n            this.setState({ weekDay:days[date.getDay()] })\n        } catch(err) {\n            const groupsApiCall = await fetch(secondGroupURL, {method: 'GET'})\n            const groups = await groupsApiCall.json()\n            await this.setState({ groupList: groups })\n            \n            var array = []\n            groups.map(item => {\n                array.push(item.name)\n            })\n\n            this.setState({similar: array})\n\n            let date = new Date()\n            let days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];\n\n            this.setState({ weekDay:days[date.getDay()] })\n        }\n    }\n\n    async getTimetable(id){\n        var firstURL = 'https://timetable.mysibsau.ru/timetable/' + String(id)\n        var secondURL = 'http://185.228.233.243/timetable/' + String(id)\n\n        try {\n\n            const timetableApiCall = await fetch(firstURL, {method: 'GET'})\n            const timetable = await timetableApiCall.json()\n\n            this.setState({ timetable: timetable, loading: false })\n        } catch(err) {\n            try{\n                const timetableApiCall = await fetch(secondURL, {method: 'GET'})\n                const timetable = await timetableApiCall.json()\n\n                this.setState({ timetable: timetable, loading: false })\n            }\n            catch(err){\n                console.log('–ù–µ –º–æ–≥—É –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ')\n            }\n        }\n    }\n\n    setGroup(name){\n        var choosed = name\n        .toUpperCase()\n        .split(' ')[0]\n\n        this.state.groupList.map(group => {\n\n            if (group.name === choosed){\n                this.setState({ textGroup: group.name})\n                this.setState({ group: group.id})\n                this.getTimetable(group.id)\n                storeData(group.id, group.name)\n            }\n        })\n    }\n\n    similarGroup(text){\n        if(text.length >= 2){\n            this.setState({ shown: this.state.similar.filter(item => {\n                if(item.includes(text.toUpperCase()))\n                    return item\n        })})\n        }\n    }\n\n    getIndex(){\n        if (((new Date() - new Date(2020, 9, 12, 0, 0, 0, 0))/1000/60/60/24)%14 <= 7)\n            return 1\n        else\n            return 2\n    }\n\n    render(){\n        if (this.state.group === null){\n            return(\n                <View style={styles.container}>\n                <MainHeader title={'–ú–æ—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ'} onPress={() => this.props.navigation.goBack()}/>\n                <View style={{flexDirection: 'row', marginTop: 25}}>\n                    <TextInput style={styles.input} onChangeText={text => this.similarGroup(text)} placeholder={'–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã...'} />\n                    <TouchableHighlight style={{borderTopRightRadius: 7, borderBottomRightRadius: 7}} onPress={() => this.setGroup(this.state.textGroup)}>\n                        <View style={styles.button}>\n                            <Text>üîç</Text>\n                        </View>\n                    </TouchableHighlight>\n                </View>\n                {this.state.shown.map(item => {\n                    return(<Help info={item} onPress={() => this.setGroup(item)} />)\n                })}\n                <Choose />\n                </View>\n            )\n        }\n        else {\n            var y\n            return(\n                \n                <View style={styles.container}>\n                    <View style={{ height: StatusBar.currentHeight, width: w, backgroundColor: 'white', position: 'absolute', zIndex: 2}}></View>\n                    <TimetableHeader title={this.state.textGroup} week={this.state.index} onPress={() => {\n                        AsyncStorage.removeItem('@key')\n                        AsyncStorage.removeItem('@group')\n                        this.setState({ group: null, textGroup: '', shown: [], timetable: [{even_week: [], odd_week: []}]})\n                        }}/>\n\n                    <Swiper style={styles.wrapper} loop={false} index={this.getIndex() - 1} showsPagination={false} onIndexChanged={(index) => this.setState({index: index})}>\n                        <ScrollView ref={\"_ScrollView1\"}>\n                        {this.state.loading === true ? <Text style={styles.loading}>–ü–æ–¥–æ–∂–¥–∏—Ç–µ, –∏–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∞...</Text> :\n                        this.state.timetable[0].odd_week.map(item => {\n                            return(\n                                <View onLayout={(event) => {\n                                    var date = new Date()\n                                    if(date.getDay() - 1 === item.day && this.getIndex() === 1){\n                                        const layout = event.nativeEvent.layout\n                                        y = layout.y\n                                        this.refs._ScrollView1.scrollTo({x: 0, y: y - 20, animated: true})\n                                    }\n                                }}>\n                                <Day day={item} key={item.day} week={1} currentWeek={this.getIndex()} weekDay={this.state.weekDay} />\n                                </View>\n                        )})}\n                        </ScrollView>\n                        <ScrollView ref={\"_ScrollView2\"}>\n                        {this.state.loading === true ? <Text style={styles.loading}>–ü–æ–¥–æ–∂–¥–∏—Ç–µ, –∏–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∞...</Text> :\n                        this.state.timetable[0].even_week.map(item => {\n                            return(<View onLayout={(event) => {\n                                var date = new Date()\n                                if(date.getDay() - 1 === item.day && this.getIndex() === 2){\n                                    const layout = event.nativeEvent.layout\n                                    y = layout.y\n                                    this.refs._ScrollView2.scrollTo({x: 0, y: y - 20, animated: true})\n                                }\n                            }}>\n                            <Day day={item} key={item.day} week={2} currentWeek={this.getIndex()} weekDay={this.state.weekDay}/>\n                            </View>) })}\n                    \n                        </ScrollView>\n                    </Swiper>\n                       \n                </View>\n                \n            )\n        }    \n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: 'white',\n        flex: 1,\n        alignItems: 'center',\n        paddingBottom: 0,\n    },\n\n    input: {\n        width: w * 0.75,\n        height: h * 0.06,\n        borderTopLeftRadius: 7,\n        borderBottomLeftRadius: 7,\n        backgroundColor: 'white',\n        paddingLeft: 10,\n        fontSize: 20,\n        fontFamily: 'roboto',\n        shadowColor: \"#000\",\n        shadowOffset: {\n\t        width: 6,\n\t        height: 6,\n        },\n        shadowOpacity: 0.30,\n        shadowRadius: 4.65,\n\n        elevation: 4,\n    },\n\n    button: {\n        height: h * 0.06,\n        width: w * 0.15,\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderLeftWidth: 0,\n        borderTopRightRadius: 7,\n        borderBottomRightRadius: 7,\n        backgroundColor: 'white',\n        shadowColor: \"#000\",\n        shadowOffset: {\n\t        width: 6,\n\t        height: 6,\n        },\n        shadowOpacity: 0.30,\n        shadowRadius: 4.65,\n\n        elevation: 4,\n    },\n\n    changeText: {\n        fontSize: 20,\n        fontFamily: 'roboto',\n        color: '#006AB3',\n    },\n\n    loading: {\n        marginTop: 20,\n        fontSize: 20,\n        fontFamily: 'roboto',\n        color: '#006AB3',\n        alignSelf: 'center'\n    },\n\n    \n\n})\n\n"]},"metadata":{},"sourceType":"module"}